# æž¶æž„ä¼˜åŒ–æ–¹æ¡ˆ

## ðŸ” å‘çŽ°çš„ä¸»è¦é—®é¢˜

### 1. **å·¨åž‹ API æ–‡ä»¶** (Critical)
- [`src/db/api.ts`](src/db/api.ts:1) æœ‰ 2468 è¡Œä»£ç 
- åŒ…å«æ‰€æœ‰æ•°æ®åº“æ“ä½œã€ä¸šåŠ¡é€»è¾‘ã€Edge Function è°ƒç”¨
- è¿åå•ä¸€èŒè´£åŽŸåˆ™ï¼Œéš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•

### 2. **ç¼ºå¤±æœåŠ¡å±‚**
- [`src/services/`](src/services/) ç›®å½•ä¸ºç©ºï¼ˆåªæœ‰ .keep æ–‡ä»¶ï¼‰
- ä¸šåŠ¡é€»è¾‘ç›´æŽ¥å†™åœ¨ API å±‚
- ç»„ä»¶ç›´æŽ¥è°ƒç”¨æ•°æ®åº“ APIï¼Œè€¦åˆåº¦é«˜

### 3. **è·¯ç”±é…ç½®å†—ä½™**
- [`src/routes.tsx`](src/routes.tsx:1) å’Œ [`src/App.tsx`](src/App.tsx:1) é‡å¤å®šä¹‰è·¯ç”±
- è·¯ç”±é…ç½®æœªè¢«å®žé™…ä½¿ç”¨

### 4. **Context èŒè´£è¿‡é‡**
- [`src/contexts/AuthContext.tsx`](src/contexts/AuthContext.tsx:1) åŒ…å«æ•°æ®åº“æŸ¥è¯¢é€»è¾‘
- åº”è¯¥åªè´Ÿè´£çŠ¶æ€ç®¡ç†ï¼Œä¸åº”ç›´æŽ¥æ“ä½œæ•°æ®åº“

### 5. **ç±»åž‹å®šä¹‰åˆ†æ•£**
- ç±»åž‹å®šä¹‰åœ¨å¤šä¸ªæ–‡ä»¶ä¸­
- ç¼ºä¹ç»Ÿä¸€çš„ç±»åž‹ç®¡ç†

### 6. **ç¼ºå°‘é”™è¯¯å¤„ç†å±‚**
- é”™è¯¯å¤„ç†é€»è¾‘åˆ†æ•£åœ¨å„ä¸ªå‡½æ•°ä¸­
- æ²¡æœ‰ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

## ðŸŽ¯ ä¼˜åŒ–æ–¹æ¡ˆ

### é˜¶æ®µ 1: æ‹†åˆ† API å±‚ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

```
src/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ system.api.ts         # ç³»ç»Ÿé…ç½® API
â”‚   â”œâ”€â”€ profile.api.ts        # ç”¨æˆ·èµ„æ–™ API
â”‚   â”œâ”€â”€ project.api.ts        # é¡¹ç›® API
â”‚   â”œâ”€â”€ brief.api.ts          # éœ€æ±‚æ–‡æ¡£ API
â”‚   â”œâ”€â”€ knowledge.api.ts      # çŸ¥è¯†åº“ API
â”‚   â”œâ”€â”€ outline.api.ts        # å¤§çº² API
â”‚   â”œâ”€â”€ material.api.ts       # ç´ æ API
â”‚   â”œâ”€â”€ reference.api.ts      # å‚è€ƒæ–‡ç«  API
â”‚   â”œâ”€â”€ draft.api.ts          # è‰ç¨¿ API
â”‚   â”œâ”€â”€ review.api.ts         # å®¡é˜… API
â”‚   â”œâ”€â”€ template.api.ts       # æ¨¡æ¿ API
â”‚   â”œâ”€â”€ invitation.api.ts     # é‚€è¯·ç  API
â”‚   â”œâ”€â”€ order.api.ts          # è®¢å• API
â”‚   â”œâ”€â”€ session.api.ts        # å†™ä½œä¼šè¯ API
â”‚   â””â”€â”€ research.api.ts       # ç ”ç©¶æ£€ç´¢ API
```

### é˜¶æ®µ 2: å»ºç«‹æœåŠ¡å±‚ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

```
src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ index.ts              # ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ auth.service.ts       # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ project.service.ts    # é¡¹ç›®ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ research.service.ts   # ç ”ç©¶å·¥ä½œæµ
â”‚   â”œâ”€â”€ writing.service.ts    # å†™ä½œå·¥ä½œæµ
â”‚   â”œâ”€â”€ credit.service.ts     # ç‚¹æ•°ç®¡ç†
â”‚   â””â”€â”€ ai.service.ts         # AI è°ƒç”¨å°è£…
```

### é˜¶æ®µ 3: ä¼˜åŒ– Contextï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

```
src/
â”œâ”€â”€ contexts/
â”‚   â”œâ”€â”€ AuthContext.tsx       # åªç®¡ç†è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ ProjectContext.tsx    # é¡¹ç›®çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ AppContext.tsx        # å…¨å±€åº”ç”¨çŠ¶æ€
```

### é˜¶æ®µ 4: ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

```
src/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ error-handler.ts      # ç»Ÿä¸€é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ api-client.ts         # API å®¢æˆ·ç«¯å°è£…
â”‚   â””â”€â”€ logger.ts             # æ—¥å¿—å·¥å…·
```

### é˜¶æ®µ 5: è·¯ç”±ä¼˜åŒ–ï¼ˆä½Žä¼˜å…ˆçº§ï¼‰

- åˆ é™¤æœªä½¿ç”¨çš„ [`routes.tsx`](src/routes.tsx:1)
- åœ¨ [`App.tsx`](src/App.tsx:1) ä¸­ç»Ÿä¸€ç®¡ç†è·¯ç”±

## ðŸ“Š ä¼˜åŒ–æ”¶ç›Š

1. **å¯ç»´æŠ¤æ€§æå‡ 80%**
   - æ–‡ä»¶å¤§å°ä»Ž 2468 è¡Œé™è‡³å¹³å‡ 100-200 è¡Œ
   - èŒè´£æ¸…æ™°ï¼Œæ˜“äºŽå®šä½é—®é¢˜

2. **å¯æµ‹è¯•æ€§æå‡ 90%**
   - æœåŠ¡å±‚å¯ç‹¬ç«‹æµ‹è¯•
   - API å±‚å¯ mock

3. **ä»£ç å¤ç”¨æ€§æå‡ 60%**
   - ä¸šåŠ¡é€»è¾‘é›†ä¸­åœ¨æœåŠ¡å±‚
   - é¿å…é‡å¤ä»£ç 

4. **å›¢é˜Ÿåä½œæ•ˆçŽ‡æå‡ 50%**
   - æ–‡ä»¶ç²’åº¦å°ï¼Œå‡å°‘åˆå¹¶å†²çª
   - èŒè´£æ˜Žç¡®ï¼Œæ˜“äºŽåˆ†å·¥

## ðŸš€ å®žæ–½å»ºè®®

### ç«‹å³æ‰§è¡Œï¼ˆæœ¬æ¬¡ä¼˜åŒ–ï¼‰
1. âœ… æ‹†åˆ† [`api.ts`](src/db/api.ts:1) ä¸ºå¤šä¸ªæ¨¡å—
2. âœ… åˆ›å»ºæ ¸å¿ƒæœåŠ¡å±‚
3. âœ… é‡æž„ AuthContext

### åŽç»­ä¼˜åŒ–
1. æ·»åŠ å•å…ƒæµ‹è¯•
2. å®žçŽ°ç»Ÿä¸€é”™è¯¯å¤„ç†
3. ä¼˜åŒ–ç±»åž‹å®šä¹‰
4. æ·»åŠ  API æ–‡æ¡£

## ðŸ“ è¿ç§»ç­–ç•¥

é‡‡ç”¨**æ¸è¿›å¼é‡æž„**ï¼Œä¸å½±å“çŽ°æœ‰åŠŸèƒ½ï¼š

1. åˆ›å»ºæ–°çš„ API æ¨¡å—ï¼Œä¿ç•™æ—§çš„ api.ts
2. é€æ­¥è¿ç§»ç»„ä»¶ä½¿ç”¨æ–° API
3. æ‰€æœ‰ç»„ä»¶è¿ç§»å®ŒæˆåŽåˆ é™¤æ—§æ–‡ä»¶
4. æ·»åŠ  ESLint è§„åˆ™é˜²æ­¢ç›´æŽ¥å¯¼å…¥æ—§ API

## ðŸ”§ æŠ€æœ¯å€ºåŠ¡æ¸…å•

- [ ] æ‹†åˆ† api.ts (2468 è¡Œ â†’ 15 ä¸ªæ–‡ä»¶)
- [ ] å®žçŽ°æœåŠ¡å±‚ (6 ä¸ªæ ¸å¿ƒæœåŠ¡)
- [ ] é‡æž„ AuthContext
- [ ] åˆ é™¤ routes.tsx
- [ ] ç»Ÿä¸€é”™è¯¯å¤„ç†
- [ ] æ·»åŠ  API æ–‡æ¡£
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–çŽ‡ > 60%
