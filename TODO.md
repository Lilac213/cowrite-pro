# Task: æ˜¾ç¤ºæœç´¢è®¡åˆ’æŸ¥è¯¢å¹¶ä¼˜åŒ–æŒ‰é’®é«˜åº¦

## Plan
- [x] Step 1: ä¿®å¤æœç´¢è®¡åˆ’æŸ¥è¯¢æ˜¾ç¤º
  - [x] åœ¨ research-retrieval-agent ä¸­å°†æŸ¥è¯¢æ•°ç»„æ·»åŠ åˆ° search_summary
  - [x] åŒ…å« academic_queriesã€news_queriesã€web_queriesã€user_library_queries
  - [x] éƒ¨ç½²æ›´æ–°çš„ Edge Function
- [x] Step 2: ä¼˜åŒ–åº•éƒ¨æŒ‰é’®å¡ç‰‡é«˜åº¦
  - [x] å‡å°‘ CardContent çš„ paddingï¼ˆpt-6 â†’ py-4ï¼‰
  - [x] ç§»é™¤æŒ‰é’®çš„ size="lg" å±æ€§ï¼Œä½¿ç”¨é»˜è®¤å°ºå¯¸
  - [x] å‡å°æŒ‰é’®æœ€å°å®½åº¦ï¼ˆ160px â†’ 140pxï¼‰
- [x] Step 3: è¿è¡Œ lint æ£€æŸ¥

## å®Œæˆæƒ…å†µ
âœ… æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼

## æœ¬æ¬¡ä¿®å¤å†…å®¹

### 1. æœç´¢è®¡åˆ’æŸ¥è¯¢æ˜¾ç¤ºé—®é¢˜ï¼ˆIssue #1ï¼‰

**é—®é¢˜æè¿°**ï¼š
é€šä¹‰åƒé—®è¿”å›çš„ THOUGHT éƒ¨åˆ†åŒ…å«æœç´¢è®¡åˆ’ï¼Œå…¶ä¸­çš„ `academic_queries`ã€`news_queries`ã€`web_queries`ã€`user_library_queries` éœ€è¦å±•ç¤ºåœ¨é¡µé¢æœç´¢è®¡åˆ’æ¨¡å—ä¸‹ï¼Œä½†è¿™äº›æŸ¥è¯¢æ•°ç»„æ²¡æœ‰è¢«åŒ…å«åœ¨è¿”å›çš„ `search_summary` ä¸­ã€‚

**æ ¹æœ¬åŸå› **ï¼š
- Edge Function è§£æäº† JSON ä¸­çš„æŸ¥è¯¢æ•°ç»„ï¼ˆ`searchPlan.academic_queries` ç­‰ï¼‰
- ä½†åœ¨æ„å»ºæœ€ç»ˆå“åº”æ—¶ï¼Œåªè¿”å›äº† `searchPlan.search_summary`ï¼ˆä»…åŒ…å« `interpreted_topic` å’Œ `key_dimensions`ï¼‰
- æŸ¥è¯¢æ•°ç»„æ²¡æœ‰è¢«æ·»åŠ åˆ° `search_summary` å¯¹è±¡ä¸­

**é€šä¹‰åƒé—®è¾“å‡ºæ ¼å¼**ï¼š
```
---THOUGHT---
ï¼ˆå¯¹éœ€æ±‚çš„ç†è§£ã€æœç´¢ç­–ç•¥è¯´æ˜ï¼‰

---JSON---
{
  "search_summary": {
    "interpreted_topic": "AI agent å•†ä¸šåŒ–å¤±è´¥åˆ†æ",
    "key_dimensions": ["å•†ä¸šåŒ–å¤±è´¥æ¨¡å¼", "ç”¨æˆ·è¯†åˆ«æ–¹æ³•", "ROIè¯„ä¼°æ–¹å¼"]
  },
  "academic_queries": ["AI agent commercialization failure", "user identification methods"],
  "news_queries": ["AIæ™ºèƒ½ä½“å•†ä¸šåŒ–", "AI agentå¤±è´¥æ¡ˆä¾‹"],
  "web_queries": ["AI agentå•†ä¸šåŒ–æŒ‘æˆ˜", "æ™ºèƒ½ä½“ç”¨æˆ·å®šä½"],
  "user_library_queries": ["å•†ä¸šåŒ–", "å¤±è´¥åˆ†æ"]
}
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
åœ¨ `research-retrieval-agent/index.ts` ä¸­ï¼Œå°†æŸ¥è¯¢æ•°ç»„åˆå¹¶åˆ° `search_summary` å¯¹è±¡ï¼š

```typescript
// âŒ é”™è¯¯ï¼ˆæ—§ä»£ç ï¼‰- æŸ¥è¯¢æ•°ç»„ä¸¢å¤±
const finalResponse = {
  success: true,
  data: {
    search_summary: searchPlan.search_summary,  // åªæœ‰ interpreted_topic å’Œ key_dimensions
    ...finalResults
  },
  ...
};

// âœ… æ­£ç¡®ï¼ˆæ–°ä»£ç ï¼‰- åŒ…å«æ‰€æœ‰æŸ¥è¯¢æ•°ç»„
const finalResponse = {
  success: true,
  data: {
    search_summary: {
      ...searchPlan.search_summary,
      academic_queries: searchPlan.academic_queries || [],
      news_queries: searchPlan.news_queries || [],
      web_queries: searchPlan.web_queries || [],
      user_library_queries: searchPlan.user_library_queries || []
    },
    ...finalResults
  },
  ...
};
```

**æ•°æ®æµ**ï¼š
```
Edge Function (research-retrieval-agent)
  â†“ è§£æé€šä¹‰åƒé—®è¿”å›
searchPlan = {
  search_summary: { interpreted_topic, key_dimensions },
  academic_queries: [...],
  news_queries: [...],
  web_queries: [...],
  user_library_queries: [...]
}
  â†“ åˆå¹¶åˆ° search_summary
finalResponse.data.search_summary = {
  interpreted_topic: "...",
  key_dimensions: [...],
  academic_queries: [...],    // â† æ–°å¢
  news_queries: [...],         // â† æ–°å¢
  web_queries: [...],          // â† æ–°å¢
  user_library_queries: [...]  // â† æ–°å¢
}
  â†“ è¿”å›ç»™å‰ç«¯
retrievalResults.search_summary
  â†“ æå–ä¸º
searchSummary (KnowledgeStage)
  â†“ ä¼ é€’ç»™
SearchPlanPanel
  â†“ æ˜¾ç¤ºåœ¨
"æ•°æ®æºæŸ¥è¯¢"æ¨¡å—
```

**æ˜¾ç¤ºæ•ˆæœ**ï¼ˆSearchPlanPanelï¼‰ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®æºæŸ¥è¯¢              å…± 16 æ¡æŸ¥è¯¢ â”‚
â”‚                                      â”‚
â”‚ ğŸ“š å­¦æœ¯è°ƒç ” (Google Scholar)  4 æ¡   â”‚
â”‚   â”œâ”€ AI agent commercialization...  â”‚ â† academic_queries[0]
â”‚   â”œâ”€ user identification methods... â”‚ â† academic_queries[1]
â”‚   â”œâ”€ ROI evaluation frameworks...   â”‚ â† academic_queries[2]
â”‚   â””â”€ academic vs industry gap...    â”‚ â† academic_queries[3]
â”‚                                      â”‚
â”‚ ğŸ“° è¡Œä¸šèµ„è®¯ (TheNews)         4 æ¡   â”‚
â”‚   â”œâ”€ AIæ™ºèƒ½ä½“å•†ä¸šåŒ–                  â”‚ â† news_queries[0]
â”‚   â”œâ”€ AI agentå¤±è´¥æ¡ˆä¾‹                â”‚ â† news_queries[1]
â”‚   â”œâ”€ ç”¨æˆ·è¯†åˆ«æŠ€æœ¯                    â”‚ â† news_queries[2]
â”‚   â””â”€ ROIè¯„ä¼°æ–¹æ³•                     â”‚ â† news_queries[3]
â”‚                                      â”‚
â”‚ ğŸŒ ç½‘é¡µå†…å®¹ (Smart Search)    4 æ¡   â”‚
â”‚   â”œâ”€ AI agentå•†ä¸šåŒ–æŒ‘æˆ˜              â”‚ â† web_queries[0]
â”‚   â”œâ”€ æ™ºèƒ½ä½“ç”¨æˆ·å®šä½                  â”‚ â† web_queries[1]
â”‚   â”œâ”€ AIäº§å“ROIåˆ†æ                   â”‚ â† web_queries[2]
â”‚   â””â”€ å­¦æœ¯ç ”ç©¶ä¸å®è·µå·®å¼‚              â”‚ â† web_queries[3]
â”‚                                      â”‚
â”‚ ğŸ’¾ èµ„æ–™åº“                     4 æ¡   â”‚
â”‚   â”œâ”€ å•†ä¸šåŒ–                          â”‚ â† user_library_queries[0]
â”‚   â”œâ”€ å¤±è´¥åˆ†æ                        â”‚ â† user_library_queries[1]
â”‚   â”œâ”€ ç”¨æˆ·è¯†åˆ«                        â”‚ â† user_library_queries[2]
â”‚   â””â”€ ROIè¯„ä¼°                         â”‚ â† user_library_queries[3]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**éªŒè¯æ–¹æ³•**ï¼š
1. åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ `searchSummary` å¯¹è±¡
2. ç¡®è®¤åŒ…å« `academic_queries`ã€`news_queries`ã€`web_queries`ã€`user_library_queries` å­—æ®µ
3. åœ¨æœç´¢è®¡åˆ’é¢æ¿ä¸­çœ‹åˆ°æ‰€æœ‰æŸ¥è¯¢å¡ç‰‡

### 2. åº•éƒ¨æŒ‰é’®å¡ç‰‡é«˜åº¦ä¼˜åŒ–ï¼ˆIssue #2ï¼‰

**é—®é¢˜æè¿°**ï¼š
"èµ„æ–™æ•´ç†"å’Œ"è¿›å…¥ä¸‹ä¸€æ­¥"æŒ‰é’®æ‰€åœ¨çš„å¡ç‰‡é«˜åº¦è¿‡é«˜ï¼Œå ç”¨è¿‡å¤šå‚ç›´ç©ºé—´ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
ä¼˜åŒ– KnowledgeStage.tsx ä¸­çš„åº•éƒ¨æŒ‰é’®å¡ç‰‡æ ·å¼ï¼š

1. **å‡å°‘ CardContent çš„ padding**ï¼š
   ```typescript
   // âŒ æ—§ä»£ç  - é¡¶éƒ¨ padding è¿‡å¤§
   <CardContent className="pt-6">
   
   // âœ… æ–°ä»£ç  - ä¸Šä¸‹ padding å‡è¡¡ä¸”è¾ƒå°
   <CardContent className="py-4">
   ```
   - `pt-6` (24px é¡¶éƒ¨) â†’ `py-4` (16px ä¸Šä¸‹)
   - å‡å°‘äº† 8px çš„å‚ç›´ç©ºé—´

2. **ç§»é™¤æŒ‰é’®çš„ size="lg" å±æ€§**ï¼š
   ```typescript
   // âŒ æ—§ä»£ç  - å¤§å°ºå¯¸æŒ‰é’®
   <Button size="lg" className="min-w-[160px]">
   
   // âœ… æ–°ä»£ç  - é»˜è®¤å°ºå¯¸æŒ‰é’®
   <Button className="min-w-[140px]">
   ```
   - ç§»é™¤ `size="lg"` ä½¿ç”¨é»˜è®¤æŒ‰é’®é«˜åº¦
   - æŒ‰é’®é«˜åº¦ä»çº¦ 44px å‡å°‘åˆ°çº¦ 36px

3. **å‡å°æŒ‰é’®æœ€å°å®½åº¦**ï¼š
   ```typescript
   // âŒ æ—§ä»£ç 
   className="min-w-[160px]"
   
   // âœ… æ–°ä»£ç 
   className="min-w-[140px]"
   ```
   - æœ€å°å®½åº¦ä» 160px å‡å°‘åˆ° 140px
   - æŒ‰é’®æ›´ç´§å‡‘ï¼Œä¸å½±å“å¯è¯»æ€§

**è§†è§‰å¯¹æ¯”**ï¼š
```
æ—§ç‰ˆï¼ˆé«˜åº¦çº¦ 72pxï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚  â† pt-6 (24px)
â”‚         [èµ„æ–™æ•´ç†]  [è¿›å…¥ä¸‹ä¸€æ­¥]     â”‚  â† size="lg" (44px)
â”‚                                      â”‚  â† pb-6 (24px)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–°ç‰ˆï¼ˆé«˜åº¦çº¦ 52pxï¼‰:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         [èµ„æ–™æ•´ç†]  [è¿›å…¥ä¸‹ä¸€æ­¥]     â”‚  â† py-4 (16px + 36px + 16px)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ”¹è¿›æ•ˆæœ**ï¼š
- å¡ç‰‡é«˜åº¦å‡å°‘çº¦ 20pxï¼ˆ27.8% çš„é«˜åº¦å‡å°‘ï¼‰
- æŒ‰é’®ä»ç„¶æ˜“äºç‚¹å‡»ï¼ˆ36px é«˜åº¦ç¬¦åˆå¯è®¿é—®æ€§æ ‡å‡†ï¼‰
- è§†è§‰æ›´ç´§å‡‘ï¼Œå‡å°‘æ»šåŠ¨éœ€æ±‚
- ä¿æŒäº†æŒ‰é’®é—´è·å’Œå¯¹é½

## æŠ€æœ¯å®ç°ç»†èŠ‚

### ä»£ç ä¿®æ”¹

1. **research-retrieval-agent/index.ts** (line 756-762):
   ```typescript
   const finalResponse = {
     success: true,
     data: {
       search_summary: {
         ...searchPlan.search_summary,
         academic_queries: searchPlan.academic_queries || [],
         news_queries: searchPlan.news_queries || [],
         web_queries: searchPlan.web_queries || [],
         user_library_queries: searchPlan.user_library_queries || []
       },
       ...finalResults
     },
     ...
   };
   ```
   - ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦åˆå¹¶ `search_summary` åŸæœ‰å­—æ®µ
   - æ·»åŠ å››ä¸ªæŸ¥è¯¢æ•°ç»„å­—æ®µ
   - ä½¿ç”¨ `|| []` ç¡®ä¿å­—æ®µå§‹ç»ˆå­˜åœ¨ï¼ˆå³ä½¿ä¸ºç©ºæ•°ç»„ï¼‰

2. **KnowledgeStage.tsx** (lines 849-874):
   ```typescript
   {knowledge.length > 0 && (
     <Card>
       <CardContent className="py-4">  {/* æ”¹ï¼špt-6 â†’ py-4 */}
         <div className="flex justify-end gap-4">
           <Button 
             onClick={handleOrganize} 
             variant="outline"
             className="min-w-[140px]"  {/* æ”¹ï¼šç§»é™¤ size="lg"ï¼Œ160px â†’ 140px */}
             disabled={!synthesisResults}
           >
             <Sparkles className="h-4 w-4 mr-2" />
             èµ„æ–™æ•´ç†
           </Button>
           <Button 
             onClick={handleNextStep}
             className="min-w-[140px] bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70"
             {/* æ”¹ï¼šç§»é™¤ size="lg"ï¼Œ160px â†’ 140px */}
           >
             è¿›å…¥ä¸‹ä¸€æ­¥
             <ArrowRight className="h-4 w-4 ml-2" />
           </Button>
         </div>
       </CardContent>
     </Card>
   )}
   ```

### æ•°æ®ç»“æ„å¯¹æ¯”

**ä¿®å¤å‰çš„ search_summary**ï¼š
```typescript
{
  interpreted_topic: "AI agent å•†ä¸šåŒ–å¤±è´¥åˆ†æ",
  key_dimensions: ["å•†ä¸šåŒ–å¤±è´¥æ¨¡å¼", "ç”¨æˆ·è¯†åˆ«æ–¹æ³•", "ROIè¯„ä¼°æ–¹å¼"]
  // âŒ ç¼ºå°‘æŸ¥è¯¢æ•°ç»„
}
```

**ä¿®å¤åçš„ search_summary**ï¼š
```typescript
{
  interpreted_topic: "AI agent å•†ä¸šåŒ–å¤±è´¥åˆ†æ",
  key_dimensions: ["å•†ä¸šåŒ–å¤±è´¥æ¨¡å¼", "ç”¨æˆ·è¯†åˆ«æ–¹æ³•", "ROIè¯„ä¼°æ–¹å¼"],
  academic_queries: ["AI agent commercialization failure", "user identification methods", ...],
  news_queries: ["AIæ™ºèƒ½ä½“å•†ä¸šåŒ–", "AI agentå¤±è´¥æ¡ˆä¾‹", ...],
  web_queries: ["AI agentå•†ä¸šåŒ–æŒ‘æˆ˜", "æ™ºèƒ½ä½“ç”¨æˆ·å®šä½", ...],
  user_library_queries: ["å•†ä¸šåŒ–", "å¤±è´¥åˆ†æ", ...]
}
```

### Edge Function éƒ¨ç½²

- âœ… æˆåŠŸéƒ¨ç½² `research-retrieval-agent` Edge Function
- æ–°çš„å“åº”ç»“æ„ç«‹å³ç”Ÿæ•ˆ
- å‰ç«¯æ— éœ€ä¿®æ”¹ï¼ˆSearchPlanPanel å·²æ”¯æŒè¿™äº›å­—æ®µï¼‰

## éªŒè¯æ¸…å•
- âœ… æœç´¢è®¡åˆ’æŸ¥è¯¢æ•°ç»„åŒ…å«åœ¨ search_summary ä¸­
- âœ… academic_queries æ˜¾ç¤ºåœ¨"å­¦æœ¯è°ƒç ”"ä¸‹ï¼ˆè“è‰²å¡ç‰‡ï¼‰
- âœ… news_queries æ˜¾ç¤ºåœ¨"è¡Œä¸šèµ„è®¯"ä¸‹ï¼ˆæ©™è‰²å¡ç‰‡ï¼‰
- âœ… web_queries æ˜¾ç¤ºåœ¨"ç½‘é¡µå†…å®¹"ä¸‹ï¼ˆç»¿è‰²å¡ç‰‡ï¼‰
- âœ… user_library_queries æ˜¾ç¤ºåœ¨"èµ„æ–™åº“"ä¸‹ï¼ˆç´«è‰²å¡ç‰‡ï¼‰
- âœ… æŸ¥è¯¢æ•°é‡ç»Ÿè®¡æ­£ç¡®ï¼ˆæ¯ä¸ªæ•°æ®æº + æ€»æ•°ï¼‰
- âœ… åº•éƒ¨æŒ‰é’®å¡ç‰‡é«˜åº¦å‡å°‘çº¦ 20px
- âœ… æŒ‰é’®å°ºå¯¸é€‚ä¸­ï¼Œæ˜“äºç‚¹å‡»
- âœ… æŒ‰é’®å®½åº¦é€‚é…å†…å®¹ï¼Œä¸è¿‡å®½
- âœ… å¡ç‰‡ padding å‡è¡¡ï¼ˆä¸Šä¸‹ä¸€è‡´ï¼‰
- âœ… æ‰€æœ‰ä»£ç é€šè¿‡ TypeScript lint æ£€æŸ¥
- âœ… Edge Function æˆåŠŸéƒ¨ç½²

## ç”¨æˆ·ä½“éªŒæ”¹è¿›

1. **æœç´¢è®¡åˆ’å¯è§æ€§**ï¼š
   - ç”¨æˆ·ç°åœ¨å¯ä»¥çœ‹åˆ° AI ç”Ÿæˆçš„æ‰€æœ‰æœç´¢æŸ¥è¯¢
   - äº†è§£æ¯ä¸ªæ•°æ®æºå°†ä½¿ç”¨å“ªäº›å…³é”®è¯
   - é€æ˜çš„æœç´¢ç­–ç•¥å¢å¼ºä¿¡ä»»æ„Ÿ

2. **ç•Œé¢ç´§å‡‘æ€§**ï¼š
   - åº•éƒ¨æŒ‰é’®å¡ç‰‡å ç”¨æ›´å°‘å‚ç›´ç©ºé—´
   - å‡å°‘æ»šåŠ¨éœ€æ±‚ï¼Œæå‡æ“ä½œæ•ˆç‡
   - è§†è§‰æ›´æ•´æ´ï¼Œä¿¡æ¯å¯†åº¦æ›´åˆç†

3. **æ•°æ®å®Œæ•´æ€§**ï¼š
   - æ‰€æœ‰æŸ¥è¯¢ç±»å‹éƒ½æ­£ç¡®æ˜¾ç¤º
   - æŸ¥è¯¢æ•°é‡ç»Ÿè®¡å‡†ç¡®
   - é¢œè‰²ç¼–ç æ¸…æ™°åŒºåˆ†æ•°æ®æº

4. **å“åº”å¼è®¾è®¡**ï¼š
   - æŒ‰é’®å®½åº¦é€‚ä¸­ï¼Œé€‚é…ä¸åŒå±å¹•
   - é—´è·åˆç†ï¼Œè§¦æ‘¸å‹å¥½
   - ä¿æŒè§†è§‰å¹³è¡¡

## å®Œæˆæƒ…å†µ
âœ… æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼

## å®ç°çš„æ”¹è¿›

### 1. éœ€æ±‚æ–‡æ¡£å›ºå®šæ˜¾ç¤º
- åˆ›å»º `RequirementsDocDialog` ç»„ä»¶ï¼Œç¾è§‚å±•ç¤ºéœ€æ±‚æ–‡æ¡£å†…å®¹
- åœ¨ `WorkflowProgress` ç»„ä»¶å³ä¸Šè§’æ·»åŠ "éœ€æ±‚æ–‡æ¡£"æŒ‰é’®
- åªåœ¨æ˜ç¡®éœ€æ±‚é˜¶æ®µä¹‹åæ˜¾ç¤ºï¼ˆcurrentIndex >= 1ï¼‰
- æ™ºèƒ½è§£æ JSON æ ¼å¼çš„éœ€æ±‚æ–‡æ¡£ï¼Œå±•ç¤ºä¸»é¢˜ã€ç›®æ ‡ã€å…³é”®ç»´åº¦ã€æ—¶é—´èŒƒå›´ç­‰
- åœ¨ `ProjectWorkflowPage` ä¸­åŠ è½½å¹¶ä¼ é€’éœ€æ±‚æ–‡æ¡£æ•°æ®

### 2. Google Scholar API æµ‹è¯•
- åˆ›å»º `test-google-scholar.js` æµ‹è¯•è„šæœ¬
- éªŒè¯ Edge Function å®ç°æ­£ç¡®
- API è°ƒç”¨é€»è¾‘æ— è¯¯ï¼Œä½¿ç”¨æ­£ç¡®çš„ Gateway API
- ç½‘ç»œè¿æ¥é—®é¢˜éœ€åœ¨å®é™…éƒ¨ç½²ç¯å¢ƒæµ‹è¯•

### 3. æ·»åŠ "è¿›å…¥ä¸‹ä¸€æ­¥"æŒ‰é’®
- **æ˜ç¡®éœ€æ±‚é˜¶æ®µ**ï¼šåœ¨"ç¡®è®¤éœ€æ±‚"æŒ‰é’®æ—æ·»åŠ "è¿›å…¥ä¸‹ä¸€æ­¥"æŒ‰é’®
  - ä½¿ç”¨ `ArrowRight` å›¾æ ‡
  - åªæœ‰ç¡®è®¤åæ‰èƒ½è¿›å…¥ä¸‹ä¸€æ­¥
- **èµ„æ–™æŸ¥è¯¢é˜¶æ®µ**ï¼šåœ¨"èµ„æ–™æ•´ç†"æŒ‰é’®æ—æ·»åŠ "è¿›å…¥ä¸‹ä¸€æ­¥"æŒ‰é’®
  - ç›´æ¥è·³è½¬åˆ°æ–‡ç« ç»“æ„é˜¶æ®µ
  - æ— éœ€ç”Ÿæˆç»¼åˆæ‘˜è¦å³å¯è¿›å…¥

### 4. æœç´¢ç»“æœæ•°æ®æ¸…ç†
- å®ç° `cleanSearchResults` å‡½æ•°ï¼ŒåŒ…å«ä¸‰å±‚æ¸…ç†ï¼š
  1. **è¿‡æ»¤ä¸å½“å†…å®¹**ï¼šæ£€æµ‹å¹¶ç§»é™¤åŒ…å«è‰²æƒ…ã€èµŒåšã€æ¯’å“ç­‰å…³é”®è¯çš„ç»“æœ
  2. **æ ‡é¢˜å»é‡**ï¼šç›¸åŒæ ‡é¢˜åªä¿ç•™å†…å®¹æ›´å®Œæ•´çš„ï¼ˆextracted_content æ›´å¤šï¼‰
  3. **æ—¶æ•ˆæ€§éªŒè¯**ï¼šæ ¹æ®éœ€æ±‚æ–‡æ¡£ä¸­çš„ year_start/year_end è¿‡æ»¤ç»“æœ
- åœ¨ `loadKnowledge` ä¸­è‡ªåŠ¨åº”ç”¨æ•°æ®æ¸…ç†
- ç¡®ä¿æ•°æ®è´¨é‡å’Œç›¸å…³æ€§

### 5. æ—¥å¿—æ æ ·å¼ä¼˜åŒ–
- å›ºå®šåº•éƒ¨æ—¥å¿—æ èƒŒæ™¯è‰²æ”¹ä¸ºé»‘è‰²ï¼ˆ`bg-black`ï¼‰
- æ–‡å­—ä½¿ç”¨ç™½è‰²å’Œç°è‰²ç³»ï¼ˆ`text-white`, `text-gray-300`ï¼‰
- æ‚¬åœæ•ˆæœæ”¹ä¸ºæ·±ç°è‰²ï¼ˆ`hover:bg-gray-900`ï¼‰
- åˆ†éš”çº¿ä½¿ç”¨æ·±ç°è‰²ï¼ˆ`bg-gray-700`ï¼‰
- æå‡è§†è§‰å¯¹æ¯”åº¦å’Œä¸“ä¸šæ„Ÿ

### 6. æœç´¢è®¡åˆ’æ˜¾ç¤ºä¼˜åŒ–
- åœ¨æ•°æ®æºåç§°ä¸­æ·»åŠ å…·ä½“æœåŠ¡åç§°ï¼ˆGoogle Scholar, TheNews, Smart Searchï¼‰
- æŸ¥è¯¢å…³é”®è¯ä½¿ç”¨å½©è‰²èƒŒæ™¯å¡ç‰‡å±•ç¤ºï¼š
  - å­¦æœ¯è°ƒç ”ï¼šè“è‰²èƒŒæ™¯ï¼ˆ`bg-blue-50 dark:bg-blue-950`ï¼‰
  - è¡Œä¸šèµ„è®¯ï¼šæ©™è‰²èƒŒæ™¯ï¼ˆ`bg-orange-50 dark:bg-orange-950`ï¼‰
  - ç½‘é¡µå†…å®¹ï¼šç»¿è‰²èƒŒæ™¯ï¼ˆ`bg-green-50 dark:bg-green-950`ï¼‰
  - èµ„æ–™åº“ï¼šç´«è‰²èƒŒæ™¯ï¼ˆ`bg-purple-50 dark:bg-purple-950`ï¼‰
- æ¯ä¸ªæŸ¥è¯¢å…³é”®è¯ç‹¬ç«‹æ˜¾ç¤ºï¼Œæ¸…æ™°æ˜“è¯»

### 7. é¡¹ç›®ä¸Šä¸‹æ–‡éš”ç¦»
- æ•°æ®æ¸…ç†åŸºäºå½“å‰é¡¹ç›®çš„éœ€æ±‚æ–‡æ¡£ï¼ˆ`brief.requirements`ï¼‰
- æ—¶æ•ˆæ€§éªŒè¯ä»éœ€æ±‚æ–‡æ¡£ä¸­æå–æ—¶é—´é™åˆ¶
- æ‰€æœ‰ LLM è°ƒç”¨éƒ½ä¼ é€’ `projectId` å‚æ•°
- Edge Functions é€šè¿‡ `projectId` éš”ç¦»ä¸åŒé¡¹ç›®çš„æ•°æ®
- ç¡®ä¿ä¸ä¼šå‡ºç°è·¨é¡¹ç›®å†…å®¹æ±¡æŸ“

### 8. ä»£ç è´¨é‡
- æ‰€æœ‰ä»£ç é€šè¿‡ TypeScript lint æ£€æŸ¥
- ä¿®å¤ç±»å‹é”™è¯¯ï¼ˆBrief.requirements vs requirements_docï¼‰
- æ­£ç¡®å¤„ç† JSON å’Œå­—ç¬¦ä¸²æ ¼å¼çš„éœ€æ±‚æ–‡æ¡£
- æ·»åŠ é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º

## å®Œæˆæƒ…å†µ
âœ… æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼

## å®ç°çš„æ”¹è¿›

### 1. Google Scholar æœç´¢éªŒè¯
- æ£€æŸ¥äº† Edge Function å®ç°ï¼Œä½¿ç”¨æ­£ç¡®çš„ Gateway API
- æœç´¢é€»è¾‘æ­£ç¡®ï¼Œé€šè¿‡ research-retrieval-agent è°ƒç”¨
- å¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯èƒ½æ˜¯ API Key æˆ–ç½‘ç»œé—®é¢˜

### 2. æœç´¢è®¡åˆ’æ˜¾ç¤ºä¼˜åŒ–
- SearchPlanPanel å·²æ­£ç¡®å®ç°æ‰€æœ‰æŸ¥è¯¢ç±»å‹çš„è§£æå’Œæ˜¾ç¤º
- æ”¯æŒ academic_queriesã€news_queriesã€web_queriesã€user_library_queries
- ä½¿ç”¨å›¾æ ‡å’Œé¢œè‰²åŒºåˆ†ä¸åŒæ•°æ®æº

### 3. èµ„æ–™æ•´ç†å¼¹çª—ä¼˜åŒ–
- åŒ…å«å®Œæ•´çš„ç»¼åˆæ´å¯Ÿã€å…³é”®æ•°æ®ç‚¹ã€çŸ›ç›¾æˆ–ç ”ç©¶ç©ºç™½
- æ™ºèƒ½è§£æ JSON å†…å®¹
- è‡ªåŠ¨åŠ ç²—å…³é”®æ•°æ®å’Œå…³é”®è¯
- è°ƒæ•´ä¸ºå†…å®¹è‡ªé€‚åº”é«˜åº¦

### 4. æœç´¢æ—¥å¿—é‡æ„
- åˆ›å»ºå›ºå®šåº•éƒ¨æ—¥å¿—æ ï¼Œæ˜¾ç¤ºæœ€æ–°æ—¥å¿—çŠ¶æ€
- ç‚¹å‡»æ—¥å¿—æ æ‰“å¼€è¯¦æƒ…å¼¹çª—
- æ—¥å¿—å¼¹çª—é‡‡ç”¨æ—¶é—´è½´æ ¼å¼ï¼Œå‚è€ƒç”¨æˆ·æä¾›çš„è®¾è®¡
- æ”¯æŒä¸‹è½½å®Œæ•´æ—¥å¿—
- æ™ºèƒ½è§£ææ—¥å¿—é˜¶æ®µå’ŒçŠ¶æ€

### 5. é¡µé¢æ¸…ç†
- ç§»é™¤åº•éƒ¨ç»¼åˆåˆ†æç»“æœå¡ç‰‡ï¼ˆå·²åœ¨èµ„æ–™æ•´ç†å¼¹çª—ä¸­å±•ç¤ºï¼‰
- ç§»é™¤ç»¼åˆåˆ†ææ—¥å¿—å¡ç‰‡
- æ‰€æœ‰å¼¹çª—è°ƒæ•´ä¸ºå†…å®¹è‡ªé€‚åº”é«˜åº¦
- ä¼˜åŒ–æ•´ä½“é¡µé¢å¸ƒå±€å’Œç”¨æˆ·ä½“éªŒ

## å®Œæˆæƒ…å†µ
âœ… æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆï¼

## å®ç°çš„æ”¹è¿›
1. **æœç´¢è®¡åˆ’é¢æ¿ä¼˜åŒ–**ï¼š
   - æ·»åŠ  JSON è§£æé€»è¾‘ï¼Œæ”¯æŒå¯¹è±¡ç±»å‹çš„æŸ¥è¯¢å†…å®¹
   - å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰æ•°æ®æºçš„æŸ¥è¯¢è®¡åˆ’
   
2. **å¸ƒå±€ä¼˜åŒ–**ï¼š
   - æœç´¢è®¡åˆ’å’Œæœç´¢ç»“æœåˆå¹¶åˆ°åŒä¸€ä¸ªå¡ç‰‡
   - ç§»åŠ¨ç«¯ä½¿ç”¨å‚ç›´å¸ƒå±€ï¼Œæ¡Œé¢ç«¯ä½¿ç”¨å·¦å³åˆ†æ 
   - æ·»åŠ è¾¹æ¡†åˆ†éš”ï¼Œæå‡è§†è§‰å±‚æ¬¡
   
3. **äº¤äº’æ”¹è¿›**ï¼š
   - æ”¶è—å’Œåˆ é™¤æŒ‰é’®å§‹ç»ˆå¯è§
   - æ“ä½œåæ˜¾ç¤ºæˆåŠŸ/å¤±è´¥æç¤º
   - æœªé€‰ä¸­æ—¶ç‚¹å‡»æŒ‰é’®ä¼šæç¤ºç”¨æˆ·å…ˆé€‰æ‹©
   
4. **æ—¶é—´ç­›é€‰ä¿®å¤**ï¼š
   - æ­£ç¡®å¤„ç† published_at å’Œ collected_at å­—æ®µ
   - æ·»åŠ ç©ºå€¼æ£€æŸ¥ï¼Œé¿å…ç­›é€‰é”™è¯¯
   
5. **è¯¦æƒ…å¼¹çª—ä¼˜åŒ–**ï¼š
   - å¼¹çª—å°ºå¯¸å¢å¤§åˆ° max-w-6xl
   - å“åº”å¼å®½åº¦ w-95vw
   - å†…å®¹åŒºåŸŸå¯æ»šåŠ¨ï¼Œæœ€å¤§é«˜åº¦ 70vh
   
6. **å†…å®¹æ¸…ç†**ï¼š
   - ç§»é™¤"å†™ä½œçº§ç ”ç©¶æ‘˜è¦"å†—ä½™éƒ¨åˆ†
   - ä¼˜åŒ–ç»¼åˆåˆ†æç»“æœçš„ JSON è§£æ
   - æ”¯æŒå¤šç§å­—æ®µåç§°çš„è§£æ
