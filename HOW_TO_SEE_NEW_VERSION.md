# 如何查看新版草稿生成页面

## ⚠️ 重要提示

您看到的旧版页面是**浏览器缓存**导致的。新版代码已经完全部署，只需要刷新浏览器即可看到。

## 🔄 刷新方法

### 方法 1: 强制刷新（推荐）
- **Windows/Linux**: 按 `Ctrl + Shift + R` 或 `Ctrl + F5`
- **Mac**: 按 `Cmd + Shift + R`

### 方法 2: 清除缓存后刷新
1. 打开浏览器开发者工具（F12）
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

### 方法 3: 无痕模式
- 打开浏览器的无痕/隐私模式
- 重新访问页面

## ✅ 如何确认是新版本

刷新后，您应该看到以下特征：

### 1. 页面标题栏
- 在 "RESEARCHOS / 项目名称" 后面会显示 **`v2.0`** 标签（蓝色背景）

### 2. 控制台日志
- 打开浏览器控制台（F12）
- 应该看到：`🎨 DraftGenerationPage v2.0 - Real-time Editing & LLM Suggestions Loaded`

### 3. 页面布局
- **左侧**: 标题 + 统计信息 + 多个独立的可编辑段落（每个段落有边框）
- **右侧**: "协作教练 (COACHING RAIL)" 面板
- **底部**: 可展开的日志面板

### 4. 交互功能
- 点击任意段落，会出现**蓝色边框高亮**
- 悬停在段落上，右上角会出现**删除按钮**
- 编辑段落后，右侧会显示**建议卡片**（蓝色/琥珀色/绿色边框）
- 底部有"**添加段落**"按钮

## 🎯 新版本核心特性

### 实时编辑系统
- ✅ 每个段落独立可编辑
- ✅ 点击段落即可编辑
- ✅ 编辑时蓝色边框高亮
- ✅ 悬停显示删除按钮

### LLM 智能建议
- ✅ 编辑完成后自动生成建议
- ✅ 三种建议类型：逻辑/表达/内容
- ✅ 彩色卡片显示建议
- ✅ 可应用或忽略建议

### 段落管理
- ✅ 添加新段落
- ✅ 删除段落
- ✅ 段落自动编号

### 协作教练面板
- ✅ 仅显示当前激活段落的建议
- ✅ 加载状态动画
- ✅ 空状态提示
- ✅ 聊天界面

## 📸 新版本截图对比

### 旧版本（您当前看到的）
- 单一大块 contentEditable 区域
- 引用标记弹窗在中间
- 没有段落边框
- 没有独立的建议卡片

### 新版本（刷新后应该看到的）
- 多个独立的段落框
- 每个段落有边框和悬停效果
- 右侧有彩色建议卡片
- 标题栏显示 v2.0 标签
- 底部有可展开的日志面板

## 🔍 故障排查

### 如果刷新后还是看不到新版本

1. **检查 URL**
   - 确保访问的是 `/project/:projectId/draft` 路径
   - 例如：`/project/abc123/draft`

2. **检查控制台**
   - 打开浏览器控制台（F12）
   - 查看是否有错误信息
   - 查找 `🎨 DraftGenerationPage v2.0` 日志

3. **完全清除缓存**
   - Chrome: 设置 → 隐私和安全 → 清除浏览数据 → 选择"缓存的图片和文件"
   - Firefox: 选项 → 隐私与安全 → Cookie 和网站数据 → 清除数据
   - Safari: 偏好设置 → 高级 → 显示开发菜单 → 开发 → 清空缓存

4. **尝试不同浏览器**
   - 如果在 Chrome 看不到，尝试 Firefox 或 Edge
   - 这可以确认是否是浏览器特定的缓存问题

## 📝 技术说明

### 为什么会有缓存问题？

1. **Vite 开发服务器**: 使用了模块热替换（HMR），但有时需要完全刷新
2. **浏览器缓存**: 浏览器会缓存 JavaScript 文件以提高性能
3. **Service Worker**: 如果启用了 PWA，可能会缓存旧版本

### 代码已更新的证据

```bash
# 文件已完全替换
$ wc -l src/pages/DraftGenerationPage.tsx
940 src/pages/DraftGenerationPage.tsx

# 新版本特征代码存在
$ grep -n "EditableParagraph" src/pages/DraftGenerationPage.tsx
522:                    <EditableParagraph
774:interface EditableParagraphProps {
783:function EditableParagraph({

# 版本标识存在
$ grep -n "v2.0" src/pages/DraftGenerationPage.tsx
56:  console.log('🎨 DraftGenerationPage v2.0 - Real-time Editing & LLM Suggestions Loaded');
```

## 🎉 确认成功

刷新后，如果您看到：
- ✅ 标题栏有 `v2.0` 标签
- ✅ 控制台有 `🎨 DraftGenerationPage v2.0` 日志
- ✅ 多个独立的段落框
- ✅ 右侧有协作教练面板
- ✅ 点击段落有蓝色边框高亮

**恭喜！您已成功看到新版本！**

## 📞 需要帮助？

如果按照以上步骤操作后仍然看不到新版本，请：
1. 截图当前页面
2. 打开控制台（F12）并截图
3. 提供当前访问的 URL
4. 说明使用的浏览器和版本

我会进一步协助您解决问题。
